\section{Data}
\label{sec:Data}



\subsection{Climate data}
Climate is a complex system, composed by many elements which interact in non-trivial (i.e. non-linear) ways. Therefore, to have a satisfying description of climate, many variables are needed. Climate data are data which can be used to provide a direct or indirect description of climate,%
\footnote{A note on nomenclature: the adjective \emph{climatological} is used in some sources instead of \emph{climate} to address to climate data. They are equivalent, but the latter is preferred in this work because it replicates the alternative term for \gls{normal} specified by \cite[1]{2017WorldMeteorologicalOrganizationWMOWMOGuidelines}.}
e.g. in situ observations, measures from remote sensing or weather stations, outputs from numerical models.\cite[1537]{2021SeneviratneWeatherAnd} The complexity of climate reflects on the complexity in structure of climate data, e.g. they can be represented as multidimensional objects and collected in climate datasets. This affects also their availability and other properties,\cite{2014FaghmousABig} therefore climate data can be regarded as big data.

To identify a subset of variables which efficiently describe the climate, the concept of \gls{ECV} is defined.\cite{2014BojinskiTheConcept} The updated list of \glspl{ECV} and their requirements are mantained by the \gls{WMO} in \cite[14-17]{2022WorldMeteorologicalOrganizationWMOThe2022}.
Climate data necessary for this study are among the present \glspl{ECV}. In this section they are characterised mathematically, while the actual data are shown in section~\ref{sec:Results}.

In the following, a generic \gls{ECV} $T$ can be represented mathematically as a scalar function
\begin{equation}
  \label{eq:math_variable}
  T : S_\text{lat} \times S_\text{lon} \times S_\text{time} \to \mathbb{R}
\end{equation}
where $S_\text{lat}$, $S_\text{lon}$ and $S_\text{time}$ are domains of latitude, longitude and time dimensions, respectively.%
\footnote{In contexts related to Machine Learning these objects are called tensors. Since they may not satisfy the mathematical definition of a tensor, in particular the map may not be multilinear and the numerical sets may not be vector spaces, no reference to such objects is made in this work.}
Latitude and longitude are the only spatial dimensions considered, because elevation is specific to each \gls{ECV}. In the following, when spatial dimensions are mentioned, they refer to the horiziontal dimensions of latitude and longitude.
Every numerical value is equipped with proper units of measurement, to represent physical quantities correctly. As a consequence, the codomain in equation~\eqref{eq:math_variable} is partially wrong: with an abuse of notation, it represents only the magnitude of the \gls{ECV} and does not consider the unit of measurement. This is a small exception to simplify the notation and in the remainder of this document units of measurement are always addressed explicitly.

A more practical representation of $T$ is a multidimensional array, where values in the domain are coordinates associated to each dimension and each entry of the array is the result of $T$ evaluated on those coordinates. Figure~\ref{fig:multidimensional} shows this representation visually.
\begin{figure}[h]
  \centering
  \includegraphics*[keepaspectratio=true,width=0.75\textwidth]{multidimensional}
  \caption{Representation of a generic \gls{ECV} as multidimensional array.}
  \label{fig:multidimensional}
\end{figure}
In the following, this representation is used to simplify the discussion and same \gls{ECV} symbol is used both for the function and the multidimensional array.
\begin{example}
  \Glsdesc{tas}, symbol \gls{tas}, is available for some coordinates $S_\text{lat} \times S_\text{lon}$ and timestamps $S_\text{time}$. It can be seen as the scalar function in equation~\eqref{eq:math_variable}, which associates each value in set $S_\text{lat} \times S_\text{lon} \times S_\text{time}$ to a scalar value with unit \glssymbol{tas}, or it can be represented as the multidimensional array in figure~\ref{fig:multidimensional}, where each entry is function~\eqref{eq:math_variable} evaluated at the corresponding coordinates.
\end{example}

As a visual aid when generic symbols are used, capital letters represent both functions and multidimensional arrays, the former being followed by the arguments in parentheses when there is an explicit reference to their values. Instead, lowercase letters are used for functions and values which are one dimensional.



\subsubsection{Climate normal}
The temporal evolution of climate is described by climate data which can be represented as time series. To quantify changes in the state of climate it is useful to define a reference period and climate data related to it.

The concept of climate \gls{normal} is introduced for this purpose, the \gls{WMO} defines it as: \glsdesc{normal}. Terms \Gls{period_average} and \gls{average} apply to monthly values of climate data, see definitions and how \glspl{normal} are evaluated in \cite[5-6]{2017WorldMeteorologicalOrganizationWMOWMOGuidelines}. However, the mean of values with other temporal domains may also be useful (e.g. multimonth \glspl{normal}, normal for each day of year of the wind speed at a given location), in the following \glspl{anomaly} are characterised clearly.
To quantify changes in the state of climate, \glspl{anomaly} are used, which are \glsdesc{anomaly}. The avarage value for \glspl{anomaly} is usually \gls{normal}.

In this work the reference period is identified by the symbol $\clim{S_\text{time}}$ and it is a period of 30 years starting on 1st January of a year ending with the digit 1. This specification satisfies the definition of averaging period for climate \glspl{normal}.
Instead, the boundaries are specific to the case study. They are chosen such that the reference period precedes the start of the formation of the system. This arbitrary criterion is chosen to compensate the natural deteriotation of materials, with artifical buildings in mind. In fact, the methodology implicitly assumes that exposure and vulnerability values are either constant in time or their change is negligible within the period they refer to. This hypothesis and the definition of $\clim{S_\text{time}}$ together guarantee that there is no correlation in time between quantities referring to different temporal periods considered in the \gls{CCRA}. Moreover, the reference period 
\begin{example}
  Suppose the system under study is the Eiffel Tower. The works started in 1887 and lasted two years, hence
  \begin{equation*}
    \clim{S_\text{time}} = \{ t : \text{$t$ day from \DTMdisplaydate{1851}{1}{1}{-1} to \DTMdisplaydate{1880}{12}{31}{-1}} \}
  \end{equation*}
  is chosen as reference period. \Glspl{normal} can be evaluated for the climate data referred to $\clim{S_\text{time}}$ and data related to the system describe it as if it would not be affected by the passing of time.
  
  If the period from \DTMdisplaydate{1861}{1}{1}{-1} to \DTMdisplaydate{1890}{12}{31}{-1} were chosen instead, no assessments could be produced for the years subsequent to the end of works.
\end{example}

In contrast to the reference period, averaging periods for future climate span 20 years and are fixed. Values referred to these periods describe the system or the climate at future time horizons, which is an useful information for any planning involving the system.\cite[23]{2023CarlinThe2023} The lower number of years in these periods do not affect negatively the prediction skill of statistics related to them.\cite[17]{2017WorldMeteorologicalOrganizationWMOWMOGuidelines}
Three time horizons are chosen:
\begin{description}
  \item[near] from \DTMdisplaydate{2024}{1}{1}{-1} to \DTMdisplaydate{2043}{12}{31}{-1};
  \item[medium] from \DTMdisplaydate{2044}{1}{1}{-1} to \DTMdisplaydate{2063}{12}{31}{-1};
  \item[long] from \DTMdisplaydate{2081}{1}{1}{-1} to \DTMdisplaydate{2100}{12}{31}{-1}.
\end{description}
Near and medium-term time horizons are chosen to be as close as possible to the present (at time of writing). This way it is more reasonable to find adaptation plans and strategies for the system at risk.
Long-term time horizons are affected by greater uncertainty for different reasons, e.g. lower confidence on outputs from climate projections, exposure subject to change. Nevertheless, the long period is chosen to show differences between scenarios, which are more evident at the end of the century for many \glspl{ECV}.



\subsubsection{Reference dataset}
The climate dataset used for evaluating reference values is ERA5 by \gls{ECMWF}.\cite{2023HersbachERA5Hourly} ERA5 is a \gls{reanalysis} dataset, which provides gridded data with global coverage and hourly temporal resolution. \Glspl{reanalysis} are observations of climate data interpolated on a spatiotemporal grid throught numerical models, a procedure called \gls{data_assimilation} (see \cite{2020HersbachTheERA5} for technical details).
The main technical data about ERA5 can be found in table~\ref{tab:technical_ERA5}.
\begin{table}[h]
  \centering
  \caption{Subset of the technical characteristics of ERA5, the complete list can be found in \cite[2003]{2020HersbachTheERA5}.}
  \label{tab:technical_ERA5}
  \begin{tabular}[b]{ll}
    Characteristic        & Value                                            \\
    \hline
    Horizontal coverage   & global                                           \\
    Horizontal resolution & $\qty{0.25}{\degree} \times \qty{0.25}{\degree}$ \\
    Temporal coverage     & from \DTMdisplaydate{1940}{1}{1}{-1} to present  \\
    Temporal resolution   & hourly
  \end{tabular}
\end{table}

In this work the ERA5 horizontal resolution of \qty{0.25}{\degree}, i.e. about \qty{31}{\kilo\metre}, is used for both latitude and longitude. In the dataset, horizontal coordinates of a grid point natively refer to the upper left angle of the cell. A traslation is applied to refer these coordinated to the centre of the cell. A square box 3 grid cells wide and centered approximately in the coordinates of the system is chosen for each case study. The systems studied in this work has spatial scale much smaller than the size of a grid cell (see section~\ref{sec:Results}), hence it is guaranteed that the central grid cell encompasses the systems, even if the coordinates of the centre of the system are not accurate. Although one grid cell is enough to cover the systems under study, an extended area is chosen to increase the predictive skill of aggregation procedures applied to the spatial dimensions. On the other hand, the \gls{CCRA} would lose spatial accuracy in the description of the local events around the system, if too many grid cells are selected.

On the temporal dimension, climate data from \DTMdisplaydate{1950}{1}{1}{-1} to \DTMdisplaydate{2023}{12}{31}{-1} are selected from ERA5. First, data are converted to a calendar with 365 days by removing 29th February in leap years. Then they are downsampled to daily resolution with the same aggregation procedures specified by \gls{WMO} for the evaluation of individual monthly values from daily values.\cite[5]{2017WorldMeteorologicalOrganizationWMOWMOGuidelines} In particular:
\begin{itemize}
  \item daily \glsdesc{tas} is the mean of hourly \glsdesc{tas} of the same day;
  \item daily \glsdesc{tasmax} is the maximum of hourly \glsdesc{tasmax} of the same day;
  \item daily \glsdesc{tasmin} is the minimum of hourly \glsdesc{tasmin} of the same day;
  \item daily \glsdesc{pr} is the sum of hourly \glsdesc{pr} of the same day.
\end{itemize}
Timestamps for daily data are set at \DTMdisplaytime{00}{00}{00}.



\subsubsection{Climate projection dataset}
Future climate is studied using the NEX-GDDP-CMIP6 dataset provided by \gls{NEX}.\cite{2022ThrasherNASAGlobal,2021ThrasherNEX-GDDP-CMIP6} The dataset is derived from results of \gls{CMIP6} for a subset of \glspl{ECV} and a single variant of 35 models from a selection of historical and ScenarioMIP experiments.\cite{2016EyringOverviewOf} The purpose of having a set of different models is to evaluate the uncertainty on predictions, in fact each model has different characteristics and applying ensemble methods reduces the variance on the outputs given by model-specific characteristics (e.g. different equations describing the same phenomena, different \gls{GCM} modules between models). NEX-GDDP-CMIP6 provide a single variant for each model.
Data are obtained through statistical downscaling and bias adjustment procedures presented in \cite{2012ThrasherTechnicalNote}. The main technical data about NEX-GDDP-CMIP6 can be found in table~\ref{tab:technical_NEX-GDDP-CMIP6}, while the full description of the dataset is in \cite{2022ThrasherNASAGlobal}.
\begin{table}[h]
  \centering
  \caption{Subset of the technical characteristics of NEX-GDDP-CMIP6, see \cite{2022ThrasherNASAGlobal} for the full specifications.}
  \label{tab:technical_NEX-GDDP-CMIP6}
  \begin{tabular}[b]{ll}
    Characteristic        & Value                                                                     \\
    \hline
    Horizontal coverage   & global                                                                    \\
    Horizontal resolution & $\qty{0.25}{\degree} \times \qty{0.25}{\degree}$                          \\
    Temporal coverage     & from \DTMdisplaydate{1950}{1}{1}{-1} to \DTMdisplaydate{2100}{12}{31}{-1} \\
    Temporal resolution   & daily
  \end{tabular}
\end{table}

The spatial resolution of this dataset matches the resolution of ERA5 and horizontal coordinates identify the centre of grid points, hence no further rescaling is required. Same spatial coordinates of the reference data are used.

Data of NEX-GDDP-CMIP6 have daily resolution but timestamps are referred to \DTMdisplaytime{12}{00}{00} of the coordinate. This does not raise problems when operations are applied to data aggregate at lower frequencies, e.g. monthly averages, but may create contradictions in pointwise calculations. Therefore, timestamps in NEX-GDDP-CMIP6 are redefined to match the timestamps or ERA5, i.e. \DTMdisplaytime{00}{00}{00}.
The temporal coverage is split between historical and future experiments. The historical simulation starts at \DTMdisplaydate{1950}{1}{1}{-1} and ends at \DTMdisplaydate{2014}{12}{31}{-1}, while the projections are from \DTMdisplaydate{2015}{1}{1}{-1} to \DTMdisplaydate{2100}{12}{31}{-1}.

In this work some models are excluded, reasons for exclusion are in appendix~\ref{sec:Selection of CMIP6 models} along with the list of used models. For each model, the following experiments are considered:
\begin{description}
  \item[historical] simulation of the past climate;
  \item[SSP1-2.6] low emission scenario, with low challenges in mitigation and adaptation to climate change;
  \item[SSP2-4.5] intermediate scenario, with moderate challenges;
  \item[SSP3-7.0] high emission scenario, with high challenges.
\end{description}
More details on the narratives of each \gls{SSP} are found in \cite{2017ONeillTheRoads}. The use of SSP scenarios allows to account for the evolution of socioeconomic elements which may affect indirectly the system.
In each model the historical experiment is extended up to \DTMdisplaydate{2023}{12}{31}{-1} using data from the SSP2-4.5 experiment. This procedure is suggested by \cite[1954]{2016EyringOverviewOf} and allows to compare historical data from models with the reference dataset, in what can be considered the \emph{past} of the study, while the \emph{future} starts at \DTMdisplaydate{2024}{1}{1}{-1}.



\subsection{Indicators}
\label{sec:Indicators}
\Glspl{indicator} of \glspl{driver} within the \gls{hazard} \gls{determinant} are functions of climate data and additional parameters. In this work the climate data are \glspl{ECV} and they have a daily frequency.
During their calculation, generally \glspl{indicator} are aggregated over the temporal dimension and are non-linear functions of their arguments.
An \gls{indicator} $I$ can be defined mathematically as
\begin{equation}
  \label{eq:math_indicator}
  I : S_\text{lat} \times S_\text{lon} \times S_\text{y} \times \prod_{p \in P_I} S_p \to \mathbb{R}
\end{equation}
where $S_\text{y}$ is a set of the years considered during the analysis, $P_I$ is the set of parameters for that indicator and $S_p$ is the set of values available for each parameter $p \in P_I$.%
\footnote{As a symbolic shortcut, if $P_I = \varnothing$ then the indicator is defined only over $S_\text{lat} \times S_\text{lon} \times S_\text{y}$.}
In the following, $\underline{z} \in \prod_{p \in P_I} S_p$ represents the set of arguments passed to the \gls{indicator}, in other words the coordinates of $I$ as multidimensional array.
Evaluation is performed for each year, i.e. the \gls{indicator} has yearly resolution or is evaluated with yearly frequency. As a consequence, the elements of set $S_\text{y}$ are references to the years taken into account during calculations.

An \gls{indicator} can be represented as a multidimensional array, similarly to \glspl{ECV}.
The dependence of an \gls{indicator} on \glspl{ECV} is not clear in the definition given by equation~\eqref{eq:math_indicator}, but in the following this is made explicit by the context or by the definition of the \gls{indicator}.

\begin{example}
  The \gls{indicator} $\mathrm{TX_x}$ is evaluated for the period 1991-2020 with yearly frequency. This \gls{indicator} is the monthly maximum value of daily maximum temperature,\cite{ETCCDIClimate} hence:
  \begin{itemize}
    \item it depends on \gls{ECV} \glsdesc{tasmax} defined at daily frequency over the considered period,
      \begin{equation*}
        S_\text{time} = \left\{ t : \parbox{0.45\linewidth}{$t$ day from \DTMdisplaydate{1991}{1}{1}{-1} to \DTMdisplaydate{2020}{12}{31}{-1}} \right\}
        \quad ;
      \end{equation*}
    \item spatial dimensions are not specified, hence the evaluation is performed for each point of an arbitrary set $S_\text{lat} \times S_\text{lon}$;
    \item no additional parameters are required, $P_\mathrm{TX_x} = \varnothing$;
    \item the outcome is a scalar value for each year in the period,
      \begin{equation*}
        S_\text{y} = \{ 1991, 1992, \dots, 2020 \}
        \quad ;
      \end{equation*}
    \item the multidimensional array representation of the \gls{indicator} is in the following figure, where each entry is a real value with unit \unit{\kelvin}:
      \begin{center}
        \includegraphics*[keepaspectratio=true,width=0.50\linewidth]{indicator_climatological_standard_normal}
      \end{center}
  \end{itemize}
\end{example}

\Glspl{indicator} of \glspl{driver} within \gls{exposure} and \gls{vulnerability} \glspl{determinant} may be defined similarly as the \gls{hazard} \gls{determinant} as scalar functions depending on specific variables characterising the system.
